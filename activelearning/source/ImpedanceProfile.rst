Measuring a Loudspeaker Impedance Profile
#########################################


Objective
_________

The objective of this lab activity is to measure the impedance profile and the resonate frequency of a permanent magnet loudspeaker.

Notes
_____

As in all the ALM labs we use the following terminology when referring to the connections to the M1000 connector and configuring the hardware. The green shaded rectangles indicate connections to the M1000 analog I/O connector. The analog I/O channel pins are referred to as CA and CB. When configured to force voltage / measure current -V is added as in CA-V or when configured to force current  / measure voltage -I is added as in CA-I. When a channel is configured in the high impedance mode to only measure voltage -H is added as CA-H.

Scope traces are similarly referred to by channel and voltage / current. Such as CA-V , CB-V for the voltage waveforms and CA-I , CB-I for the current waveforms.

Background
__________

The chief electrical characteristic of a dynamic loudspeaker is its electrical impedance as a function of frequency. It can be visualized by plotting it as a graph, called the impedance curve.

The most common type of loudspeaker is an electro-mechanical transducer using a voice coil connected to a diaphragm or cone. The voice coil in moving coil loudspeakers is suspended in a magnetic field provided by a permanent magnet. As electric current flows through the voice coil, from an audio amplifier, the electro-magnetic field created by the current in the coil reacts against the permanent magnet's fixed field and moves the voice coil (also the cone). Alternating current will move the cone back and forth. The movement of the cone vibrates the air producing the sound.

The moving system of the loudspeaker, including the cone, cone suspension, spider and the voice coil, has a certain mass and compliance. This is most commonly modeled as a simple mass suspended by a spring that has a certain resonant frequency at which the system will vibrate most freely.

This frequency is known as the "free-space resonance" of the speaker and is designated by F<sub>S</sub>. At this frequency, since the voice coil is vibrating with the maximum peak-to-peak amplitude and velocity, the back-emf generated by coil motion in a magnetic field is also at its maximum. This causes the effective electrical impedance of the speaker to be at its maximum at F<sub>S</sub>, known as Z<sub>MAX</sub>. For frequencies just below resonance, the impedance rises rapidly as the frequency approaches F<sub>S</sub> and is inductive in nature. At resonance, the impedance is purely resistive and beyond it, as the impedance drops, it looks capacitive. The impedance reaches a minimum value, Z<sub>MIN</sub>, at some frequency where the behavior is mostly (but not perfectly) resistive over some range of frequencies. A speaker's rated or nominal impedance, Z<sub>NOM</sub>, is derived from this Z<sub>MIN</sub> value.

Knowing the resonate frequency and the minimum and maximum impedances are important when designing cross over filter networks for multiple driver speakers and the physical enclosure the speakers are mounted in.

Loudspeaker Impedance Model
___________________________

To help understand the measurements you are about to make, a simplified electrical model of a loudspeaker is shown in figure 1. 

.. image:: alm-cir-lab11-fig1.png

<WRAP centeralign>Figure 1. Loudspeaker Impedance Model</WRAP>

The circuit in figure 1 has a dc resistance placed in series with a lossy parallel resonant circuit made up of L, R, and C, which models the dynamic impedance of the speaker over the frequency range of interest. 

• Rdc is the dc resistance of the loudspeaker as measured with a DC ohmmeter. The dc resistance is often referred to as the DCR in a speaker/subwoofer data sheet. The dc resistance measurement is usually less than the driver's nominal impedance Z<sub>NOM</sub>. Rdc is typically less than the specified loudspeaker impedance and the novice loudspeaker enthusiast may be fearful that the driver amplifier will be overloaded. However, because the inductance (L) of a speaker increases with an increase in frequency, it is unlikely that the driver amplifier actually sees the dc resistance as its load.

• L is the voice coil inductance usually measured in milliHenries (mH). Typically, the industry standard is to measure the voice coil inductance at 1000 Hz. As frequencies increase above 0 Hz, there is a rise in impedance above the Rdc value. This is because the voice coil acts as an inductor. Consequently, the overall impedance of a loudspeaker is not a constant impedance, but can be represented as a dynamic profile that changes with input frequency as we will see when we make measurements. Maximum impedance, Z<sub>MAX</sub>, of the loudspeaker occurs at the resonant frequency, F<sub>S</sub>, of the loudspeaker.

• F<sub>S</sub> is the resonant frequency of a loudspeaker. The impedance of a loudspeaker is a maximum at F<sub>S</sub>. The resonant frequency is the point at which the total mass of the moving parts of the loudspeaker become balanced with the force of the speaker suspension when in motion. The resonant frequency information is important to prevent an enclosure from ringing. In general, the mass of the moving parts and the stiffness of the speaker suspension are the key elements that affect the resonant frequency. A vented enclosure (bass reflex) is tuned to F<sub>S</sub> so that the two work in unison. As a rule, a speaker with a lower F<sub>S</sub> is better for low-frequency reproduction than a speaker with a higher F<sub>S</sub>. 

• R represents the mechanical resistance of a driver's suspension losses. 

Materials
_________

RedPitaya
Solder-less Breadboard\\
1 - 100 Ω Resistor (or any similar value)\\
1 - Loudspeaker, it is best if the speaker is one with a cone diameter larger than 4 inches such that is has a relatively low resonant frequency.

Directions
__________

First build the circuit shown in the top half of figure 2, preferably using your solder-less breadboard. The loudspeaker can be in an enclosure or not. This configuration allows us to measure the voltage across the speaker V<sub>L</sub> using channel B.

.. image:: alm-cir-lab11-fig2.png

<WRAP centeralign>Figure 2 Speaker measurement setups for both V<sub>L</sub> and I<sub>L</sub></WRAP>

Procedure to use ALICE-SA spectrum analyzer
___________________________________________

Start the ALICE-SA spectrum analyzer software.
 
Under the Mode drop down menu select Peak hold mode. Under the FFT window menu select Flat top window. Click the +Samples button until 16384 samples is selected. Under the Curves menu select CA-dBV, CB-dBV and Phase B-A.

Under the Options drop down menu click on Cut-DC to select it.

Set Channel A Min value to 1.0 Volts and the Max to 4.0 V. Set AWG A Mode to SVMI and Shape to Sine. Set AWG channel B Mode to Hi-Z. Be sure the Sync AWG check box is selected.

Use the Start Frequency button to set the frequency sweep to start at 10 Hz and use the Stop Frequency button to set the sweep to stop at 500 Hz. Under the Sweep Gen drop down menu select CHA as the channel to sweep. Also use the Sweep Steps button to enter the number of frequency steps, use 300 as the number.

Hit the green Run button. After the sweep stops under the Options menu press the Store trace button to save the current screen traces. Under the Curves menu select RA-dBV, RB-dBV and RPhase B-A to display the stored traces.

Now Export the data, as magnitude not in dB to make the math easier, to a comma separated values file ( File menu - Save Data ) and load it into a spreadsheet program such as Excel. All the frequency data from 0 to 50 KHz is saved to the file so you will want to remove ( delete ) all the data above 500 Hz before making any calculations. You will use the 10 Hz to 500 Hz Channel B data from this file as the V<sub>L</sub> values.

Now change the connections on your breadboard to look like the configuration in the bottom half of figure 2. This configuration now allows us to measure the voltage across the 100 Ω resistor with channel B. You will use these measurements to calculate I<sub>L</sub>.

After double checking your changes, hit the green Run button again. After the sweep stops you should see the frequency response plot that looks something like figure 3. The source voltage ( a flat line ) will be the light and dark green lines which should be right on top of each other. Voltage across the speaker ( dark orange ) and the current through the speaker represented as the voltage across the 100 Ω resistor ( light orange ). The Phase plots show the relative phase of the voltage and current to the source voltage. Note the points where the phase is zero. The data on the screen is plotted in dB so the vertical scale is not in volts. Your speaker will probably look much different than this example.

.. image:: alm-cir-lab11-screen1.png

<WRAP centeralign>Figure 3 Example sweep for both configurations</WRAP>

Again Export the data, as magnitude to a comma separated values file ( File menu - Save Data ). Load this new 10 Hz to 500 Hz data to the same spreadsheet that contains the 10 Hz to 500 Hz data from the first sweep.

By saving the data as magnitude the signal generator amplitude (in volts rms) is saved to the file. You can calculate the magnitude of the speaker impedance Z is by dividing the voltage across the speaker V<sub>L</sub> by the current I<sub>L</sub>. I<sub>L</sub> is of course the voltage across the resistor divided by the resistance.

<m>Z = V_L/I_L</m>

<m>V_L = CB_mag</m> from sweep 1

<m>I_L = CB_mag /100</m> from sweep 2

You can now plot the calculated impedance Z vs Frequency. An example plot is shown in figure 4. Your speaker will probably look much different than this.

.. image:: alm-cir-lab11-fig4.png

<WRAP centeralign>Figure 4 Calculated example impedance plot</WRAP>

The speaker impedance is very small in the linear region but is much higher at the resonance frequency F<sub>S</sub>.

Questions
_________

Based on your measured data extract the L C and R for the speaker electrical model shown in figure 1 for the speaker you used. You can measure Rdc with a DC ohmmeter if you have one available. Ignore L<sub>INPUT</sub> as it will be small compared to L. Enter these values into a circuit simulation schematic of the model and generate a frequency response sweep from 10 Hz to 500 Hz and compare your model to the data you measured in the lab.

Procedure to use the RedPitaya LCR application to measure speaker impedance
___________________________________________________________________________

Change the connections to the speaker back as shown in figure 5. Channel B again measures V<sub>L</sub> the voltage across the speaker. The impedance analyzer software uses the difference between the channel A voltage and channel B voltage as well as the relative phase between the channels to calculate the impedance based the value of R<sub>1</sub>.

.. image:: alm-cir-lab11-fig5.png

<WRAP centeralign>Figure 5, Speaker impedance measurement setup</WRAP>

Run the ALICE-VVM software tool.

Set  Ext Res = 100, set Freq to a value well below the resonate frequency of your speaker. In this first example measurement 43 Hz was used. Set the Ohms/div to 10. As can be seen from the data the series resistance of the speaker is around 11 Ω and the reactance is inductive.

.. image:: alm-cir-lab11-screen2.png

<WRAP centeralign>Figure 6, Measurement at frequency below resonance</WRAP>

Now set the frequency to the resonate value from the frequency sweeps. You may want to fine adjust the value to find the exact point where the reactance is zero as shown in figure 7.

.. image:: alm-cir-lab11-screen3.png

<WRAP centeralign>Figure 7. Measurement at resonate frequency</WRAP>

This result should agree with the results from the frequency sweeps. Now set the frequency to a point above the resonate frequency where the phase is near its negative peak as shown in figure 8.

{{ :university:courses:alm1k:circuits1:alm-cir-lab11-screen4.png?650 |}}

<WRAP centeralign>Figure 8, Measurement at frequency above resonance</WRAP>

As can be now seen from the data the series resistance of the speaker is around 16 Ω and the reactance is capacitive.

Explain your results based on the parallel LC loudspeaker impedance model in figure 1.

For Further Reading
___________________

http://en.wikipedia.org/wiki/Electrical_characteristics_of_dynamic_loudspeakers
