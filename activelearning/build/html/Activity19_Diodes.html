

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>19. Diodes and Jupyter Notebook example &mdash; Red Pitaya 1.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Red Pitaya 1.0 documentation" href="index.html"/>
        <link rel="next" title="20. Diode Rectifiers" href="Activity20_DiodeRectifiers.html"/>
        <link rel="prev" title="18. The Comparator, Positive Feedback and Schmitt Trigger" href="Activity18_TheComparatorSchmittTrigger.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Red Pitaya
          

          
            
            <img src="_static/RedPitayaLogo.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Activity01_Phase.html">1. What is Phase?</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity02_Kirchhoff.html">2. Kirchhoff’s Voltage and Current Laws</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity03_Voltage.html">3. Voltage Division</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity04_Proportionality.html">4. Proportionality and Superposition</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity05_Thevenin.html">5. Thévenin Equivalent Circuit and Maximum Power Transfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity06_ResponseRC.html">6. Transient Response of RC Circuit</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity07_ResponseRL.html">7. Transient Response of an RL Circuit</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity08_ResonanceRCL.html">8. Resonance in RLC Circuits</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity09_LowPassandHighPassFilters.html">9. Low Pass and High Pass Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity10_BandPassFilters.html">10. Band Pass Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity11_ImpedanceMeasurementFrequencyEffects.html">11. Impedance Measurement - Frequency Effects</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity12_MeasuringaLoudspeakerImpedanceProfile.html">12. Measuring a Loudspeaker Impedance Profile</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity13_BasicOPAmpConfigurations.html">13. Basic OP Amp Configurations</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity14_OPAMPOpenLoopGain.html">14. OPAMP Open Loop Gain</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity15_OpAmpGainBandwidthProduct.html">15. OPAMP Gain Bandwidth Product <span class="math notranslate">\(GBW\)</span></a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity16_DifferenceAmplifier.html">16. Difference Amplifier</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity17_CurrentSensingUsingDifferenceAmplifier.html">17. Current Sensing using a Difference Amplifier</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity18_TheComparatorSchmittTrigger.html">18. The Comparator, Positive Feedback and Schmitt Trigger</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">19. Diodes and Jupyter Notebook example</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#objective">19.1. Objective</a></li>
<li class="toctree-l2"><a class="reference internal" href="#notes">19.2. Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#background">19.3. Background</a></li>
<li class="toctree-l2"><a class="reference internal" href="#diode-schematic-symbols">19.4. Diode schematic symbols</a></li>
<li class="toctree-l2"><a class="reference internal" href="#zener-diode-fundamentals">19.5. Zener Diode Fundamentals</a></li>
<li class="toctree-l2"><a class="reference internal" href="#schottky-diode-fundamentals">19.6. Schottky Diode Fundamentals</a></li>
<li class="toctree-l2"><a class="reference internal" href="#led-fundamentals">19.7. LED Fundamentals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#experiments">19.7.1. Experiments</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pn-junction-diode-vi-characteristic">19.8. PN junction diode VI characteristic</a></li>
<li class="toctree-l2"><a class="reference internal" href="#materials">19.9. Materials</a></li>
<li class="toctree-l2"><a class="reference internal" href="#procedure-time-domain-measurements">19.10. Procedure - time domain measurements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#procedure-vi-characteristics-measurements">19.11. Procedure - VI characteristics measurements</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Activity20_DiodeRectifiers.html">20. Diode Rectifiers</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity21_PrecisionRectifiers.html">21. Precision Rectifiers, Absolute value circuits</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity22_TheBJTasDiode.html">22. The BJT transistor connected as a diode</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity23_TheMOSAsDiode.html">23. The MOS transistor connected as a diode</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity24_TheBJTasSwitch.html">24. BJT transistor as a switch</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity25_MOSasSwitch.html">25. MOSFET transistor as a switch</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity26_BJTCommonEmitterAmplifier.html">26. BJT Common Emitter Amplifier</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity27_MOSCommonSourceAmplifier.html">27. MOS transistor common source amplifier</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity28_BoostConverter.html">28. DC-DC Boost Converter</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Red Pitaya</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>19. Diodes and Jupyter Notebook example</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/Activity19_Diodes.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="diodes-and-jupyter-notebook-example">
<h1>19. Diodes and Jupyter Notebook example<a class="headerlink" href="#diodes-and-jupyter-notebook-example" title="Permalink to this headline">¶</a></h1>
<div class="section" id="objective">
<h2>19.1. Objective<a class="headerlink" href="#objective" title="Permalink to this headline">¶</a></h2>
<p>The purpose of this activity is to investigate the current vs. voltage
characteristics of various solid state PN junction diodes such as the
conventional Si diode, the Schottky barrier diode, the Zener diode and
Light emitting diode (LED).</p>
</div>
<div class="section" id="notes">
<h2>19.2. Notes<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h2>
<p>In this tutorials we use the terminology taken from the user manual
when referring to the connections to the Red Pitaya STEMlab board
<a class="reference external" href="http://redpitaya.readthedocs.io/en/latest/doc/developerGuide/125-10/top.html">hardware</a>.</p>
<p>Extension connector pins used for <strong>-3.3V</strong> and <strong>+3.3V</strong> voltage
supply are show in the documentation <a class="reference external" href="http://redpitaya.readthedocs.io/en/latest/doc/developerGuide/125-14/extent.html#extension-connector-e2">here</a>.</p>
<p><a class="reference external" href="http://redpitaya.readthedocs.io/en/latest/doc/appsFeatures/apps-featured/oscSigGen/osc.html">Oscilloscope</a> &amp; <a class="reference external" href="http://redpitaya.readthedocs.io/en/latest/doc/appsFeatures/apps-featured/oscSigGen/osc.html">Signal</a> <a class="reference external" href="http://redpitaya.readthedocs.io/en/latest/doc/appsFeatures/apps-featured/oscSigGen/osc.html">generator</a> application is used for generating
and observing signals on the circuit.</p>
</div>
<div class="section" id="background">
<h2>19.3. Background<a class="headerlink" href="#background" title="Permalink to this headline">¶</a></h2>
<p>The PN junction diode is a device which is commonly used in circuit
applications such as rectification where current is allowed to flow in
only one direction. When the diode is fabricated in silicon, the
forward voltage drop is typically 0.7 V and the <span class="math notranslate">\({V_D}\)</span>
vs. <span class="math notranslate">\({I_D}\)</span> characteristic relating diode voltage and current
can be described by an exponential relationship:</p>
<div class="math notranslate">
\[I_D = I_S \bigg( e^{\frac{V_Dq}{nkT}} - 1  \bigg)   \quad (1)\]</div>
<p>where <span class="math notranslate">\(I_{S}\)</span> and n are scale factors, and <span class="math notranslate">\(kT/q\)</span> (25.4 mV
at room temperature) is the so called thermal voltage <span class="math notranslate">\({V_T}\)</span>.</p>
</div>
<div class="section" id="diode-schematic-symbols">
<h2>19.4. Diode schematic symbols<a class="headerlink" href="#diode-schematic-symbols" title="Permalink to this headline">¶</a></h2>
<p>Each type of diode has a specific schematic symbol which are
variations of the conventional diode symbol shown on the left in
figure 1. A sort of “Z” shaped cathode denotes a zener diode as in the
second symbol in figure 1. An “S” shaped cathode denotes a Schottky
diode as in the next symbol. The arrows pointing away from the diode
denotes an LED as in the symbol on the right. Arrows pointing toward
the diode would represent a photo diode light detector.</p>
<img alt="_images/Activity_19_Figure_1.png" src="_images/Activity_19_Figure_1.png" />
<p>Figure 1: Diode schematic symbols</p>
</div>
<div class="section" id="zener-diode-fundamentals">
<h2>19.5. Zener Diode Fundamentals<a class="headerlink" href="#zener-diode-fundamentals" title="Permalink to this headline">¶</a></h2>
<p>A Zener diode is similar in construction and operation to an ordinary
diode. Unlike a conventional diode where the intended use is to
prevent current in the reverse direction, a zener diode is mostly used
in the reverse region above the breakdown voltage. Its <span class="math notranslate">\(I\)</span> vs,
<span class="math notranslate">\(V\)</span> characteristic curve is similar to ordinary diode. By
adjusting the doping of the P and N sides of the junction, it is
possible to design a Zener diode that breaks down at anywhere
from a few volts to a few hundred volts. See Figure 2. In this
breakdown or zener region the diode voltage will remain
approximately constant over a wide range of currents. The
maximum reverse-bias potential that can be applied before
entering the Zener region is called the Peak Inverse Voltage
(PIV) or the Peak Reverse Voltage (PRV).</p>
<img alt="_images/Activity_19_Figure_2.png" src="_images/Activity_19_Figure_2.png" />
<p>Figure 2: Forward and reverse zener diode <span class="math notranslate">\(I/V\)</span> characteristic</p>
<p>At voltages above the onset of breakdown, an increase in applied
voltage will cause more current to flow in the diode, but the voltage
across the diode will stay very nearly at <span class="math notranslate">\(V_Z\)</span>. A Zener diode
operated in reverse breakdown can provide a reference voltage for
systems like voltage regulators or voltage comparators.</p>
</div>
<div class="section" id="schottky-diode-fundamentals">
<h2>19.6. Schottky Diode Fundamentals<a class="headerlink" href="#schottky-diode-fundamentals" title="Permalink to this headline">¶</a></h2>
<p>A Schottky barrier diode uses a rectifying metal-semiconductor
junction formed by plating, evaporating or sputtering one of a variety
of metals onto n-type or p-type semiconductor material. Generally,
n-type silicon and n-type GaAs are used in commercially available
Schottky diodes. The properties of a forward biased Schottky barrier
diode are determined by majority carrier phenomena. A conventional PN
junction diode’s properties are determined by minority
carriers. Schottky diodes are majority carrier devices that can be
switched rapidly from forward to reverse bias without minority carrier
storage effects.</p>
<p>The normal current vs. voltage <span class="math notranslate">\(I/V\)</span> curve of a Schottky barrier
diode resembles that of a PN junction diode with the following
exceptions:</p>
<ol class="arabic simple">
<li>The reverse breakdown voltage of a Schottky barrier diode is lower
and the reverse leakage current higher than those of a PN junction
diode made using the same resistivity semiconductor material.</li>
<li>The forward voltage at a specific forward current is also lower for
a Schottky barrier diode than for a PN junction diode. For example,
at 2 mA forward bias current a low barrier silicon Schottky diode
will have a forward voltage of ~0.3 volts while a silicon PN
junction diode will have a voltage of ~0.7 volts. This lower
forward voltage drop can cut the power dissipated in the diode by
more than one half. This power savings can be very significant when
the diodes need to carry large forward currents. The current
vs. voltage (<span class="math notranslate">\(I/V\)</span>) relationship for a Schottky barrier diode
is given by the following equation known as the Richardson
equation. The primary difference from the conventional diode
equation is in <span class="math notranslate">\(I_S\)</span> with the addition of the modified
Richardson constant <span class="math notranslate">\(A^*\)</span>.</li>
</ol>
<div class="math notranslate">
\[I_D = I_S \bigg( e^{\frac{V_Dq}{nkT}} - 1  \bigg)   \quad (2)\]</div>
<div class="math notranslate">
\[I_S = A A^* T^2 e^{-\frac{q \Phi B}{kT}}   \quad (3)\]</div>
<p>Where:</p>
<ul class="simple">
<li><span class="math notranslate">\(A\)</span> = junction area</li>
<li><span class="math notranslate">\(A^*\)</span> = modified Richardson constant (value varies by material
and dopant) = <span class="math notranslate">\(110 A/(°K^2-cm^2)\)</span>  for n-type Si</li>
<li><span class="math notranslate">\(T\)</span> = absolute temperature in <span class="math notranslate">\(K\)</span> (Kelvins)</li>
<li><span class="math notranslate">\(q\)</span> = electronic charge  = <span class="math notranslate">\(1.6E-19 \quad C\)</span></li>
<li><span class="math notranslate">\(\Phi B\)</span> = barrier height in volts k = Boltzman’s constant =
1.37 * 10-23 J/K = <span class="math notranslate">\(1.37E-23 \quad J/K\)</span></li>
<li><span class="math notranslate">\(n\)</span> = ideality factor (forward slope factor, determined by metal-semiconductor interface)</li>
</ul>
</div>
<div class="section" id="led-fundamentals">
<h2>19.7. LED Fundamentals<a class="headerlink" href="#led-fundamentals" title="Permalink to this headline">¶</a></h2>
<p>The LED is a junction diode that emits light when forward
biased. Actually all PN junction diodes emit photons when forward
biased, it is just that the photons are in the infrared band and the
physical shape of the diode does not allow the photons to escape the
package. To achieve the visible light emitting property, it is
necessary to fabricate the LED from materials with larger band-gaps
other than silicon. As a result, the forward voltage drop of the LED
is greater than 0.7V; usually on the order of 1.5 to 2 volts depending
on the wavelength of the emitted light. The LED is also built in a
special transparent package as shown in figure 3.</p>
<img alt="_images/Activity_19_Figure_3.png" src="_images/Activity_19_Figure_3.png" />
<p>Figure 3: Light emitting diodes</p>
<p>An LED is a semiconductor device that emits electromagnetic radiation
at optical and infrared frequencies. The device is a PN junction diode
made from p-type and n-type semiconductors, usually GaAs, GaP or
SiC. They emit light only when an external applied voltage is used to
forward bias the diode above a minimum threshold value. The gain in
electrical potential energy delivered by this voltage is sufficient to
force electrons to flow out of the n-type material, across the
junction barrier, and into the p-type region. This threshold voltage
for the onset of current flow across the junction and the production
of light is <span class="math notranslate">\(V_0\)</span>. The emission of light occurs after electrons
enter into the p-region (and holes into the n-region). These electrons
are a small minority surrounded by holes (essentially the
anti-particles of the electrons) and they will quickly find a hole to
recombine with. Energetically, the electron relaxes from the excited
state (conduction band) to the ground state (valence band). The diodes
are called light emitting because the energy given up by the electron
as it relaxes is emitted as a photon. Above the threshold value, the
current and light output increases exponentially with the bias voltage
across the diode. The quanta of energy or photon has an energy E =
hf. The relation between the photon energy and the turn-on voltage
<span class="math notranslate">\(V_0\)</span>, is:</p>
<div class="math notranslate">
\[eV_0 = E_g = hf = \frac{hc}{\lambda} \quad (4)\]</div>
<p>where:</p>
<ul class="simple">
<li><span class="math notranslate">\(E_g\)</span> is the size of the energy gap</li>
<li><span class="math notranslate">\(V_0\)</span> is the threshold voltage</li>
<li><span class="math notranslate">\(f\)</span> and <span class="math notranslate">\(\lambda\)</span> are the frequency and wavelength of
the emitted photons</li>
<li><span class="math notranslate">\(c\)</span> is the velocity of light</li>
<li><span class="math notranslate">\(e\)</span> is the electronic charge</li>
<li><span class="math notranslate">\(h\)</span> is Planck’s constant</li>
</ul>
<div class="section" id="experiments">
<h3>19.7.1. Experiments<a class="headerlink" href="#experiments" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="pn-junction-diode-vi-characteristic">
<h2>19.8. PN junction diode VI characteristic<a class="headerlink" href="#pn-junction-diode-vi-characteristic" title="Permalink to this headline">¶</a></h2>
<p>The current vs. voltage characteristics of the PN junction diode can
be measured using the STEMlab and the following connections shown in
figure 4. Set up the breadboard with the generator OUT1 channel output
attached to one end of the resistor. The other end of the resistor is
connected to one end of the diode being measured as shown in the
diagram. The inputs channels IN1 and IN2 are also connected different
ends the resistor, therefore diode current and voltage will be given
as:</p>
<div class="math notranslate">
\[ \begin{align}\begin{aligned}I_d = (IN_1 - IN_2) / R_1\\.\\V_d = IN_2\end{aligned}\end{align} \]</div>
<img alt="_images/Activity_19_Figure_4.png" src="_images/Activity_19_Figure_4.png" />
<p>Figure 4: Connection diagram for diode I vs. V curves</p>
<p>For measuring current vs. voltage characteristics of the PN junction
diode OUT1 generator should be configured as 1kHz triangle wave with 1
V max and 0 V min values. For measuring <span class="math notranslate">\(VI\)</span> curve an “XY” plot
is required where x-axis will represent diode voltage
<span class="math notranslate">\(IN_2\)</span> and y-axis a diode current <span class="math notranslate">\((IN_1 - IN_2) / R_1\)</span>.
For this task we will use Jupyter Notebook Web application.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <a class="reference external" href="http://jupyter.org/index.html">Jupyter</a> <a class="reference external" href="http://jupyter.org/index.html">Notebook</a> is a web application that allows you to
create and share documents that contain live code, equations,
visualizations and explanatory text. They have also ensured support
for the Jupyter application with Red Pitaya libraries enabling
control of all features of the STEMlab boards such as: signal
acquisition, signal generation, digital signal control,
communication etc. The Jupyter Notebook is started on the same way
as any other applications. After starting Jupyter application a web
based notebook is opened.  This combination of the notebook,
STEMlab and Python features makes the STEMlab an excellent tool for
prototyping and quick programing. Since Jupyter Notebook enables
text, equation and picture editing this is a perfect tool for
tutorials, examples etc.</p>
</div>
<p>But before measuring <span class="math notranslate">\(VI\)</span> curve you should check voltages
signals using Oscilloscope &amp; Signal generator application.</p>
</div>
<div class="section" id="materials">
<h2>19.9. Materials<a class="headerlink" href="#materials" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Solder-less Breadboard</li>
<li>Resistor 10 Ω</li>
<li>Conventional diode (1N4001 or similar)</li>
</ul>
</div>
<div class="section" id="procedure-time-domain-measurements">
<h2>19.10. Procedure - time domain measurements<a class="headerlink" href="#procedure-time-domain-measurements" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Build the circuit from figure 4 on the breadboard</li>
</ol>
<img alt="_images/Activity_19_Figure_5.png" src="_images/Activity_19_Figure_5.png" />
<p>Figure 5: Connections on the breadboard</p>
<ol class="arabic simple" start="2">
<li>Start the Oscilloscope &amp; Signal generator application</li>
<li>In the OUT1 settings menu set Amplitude value to 0.5V, DC offset to
0.5V to apply a triangle wave as the input voltage. From the
waveform menu select TRIANGLE, deselect SHOW button and select
enable.</li>
<li>On the left bottom of the screen be sure that  IN1 V/div is set to
200mV/div (You can set V/div by selecting the desired channel and
using vertical +/- controls)</li>
<li>On the left bottom of the screen be sure that  IN2 V/div is set to
200mV/div (You can set V/div by selecting the desired channel and
using vertical +/- controls)</li>
<li>Set t/div value to 200us/div (You can set t/div using horizontal
+/- controls)</li>
<li>In the MATH settings menu set IN1-IN2 and select enable. <strong>Math
trace scaled by factor R1 represent diode current</strong></li>
</ol>
<img alt="_images/Activity_19_Figure_6.png" src="_images/Activity_19_Figure_6.png" />
<p>Figure 6: Voltages and current on the diode (Time dependent)</p>
<p>From figure 6 we can see that diode start conducting when the voltage
on it exceed diode threshold voltage which is around 0.6V.</p>
<p>Also, diode current represented with MATH trace is observable. We can
clearly see that when the diode voltage is below 0.6 the diode current
is 0A. At point when the diode voltage exceed 0.6V diode starts
conducting and the path current is only limited by resistor R1.</p>
</div>
<div class="section" id="procedure-vi-characteristics-measurements">
<h2>19.11. Procedure - VI characteristics measurements<a class="headerlink" href="#procedure-vi-characteristics-measurements" title="Permalink to this headline">¶</a></h2>
<p>For this task we will use Jupyter Notebook Web application.
How to start Jupyter Notebook and create new project is shown on figure 7 flow chart.</p>
<img alt="_images/Activity_19_Figure_7.png" src="_images/Activity_19_Figure_7.png" />
<p>Figure 7: Creating new Jupyter notebook</p>
<p>If you have successfully created new Jupyter notebook then copy-paste
code bellow and run it. Code bellow will generate same signal as from
figure 6 but it will plot them in XY graph. For measuring <span class="math notranslate">\(VI\)</span>
curve an “XY” plot is required where x-axis will represent diode
voltage <span class="math notranslate">\(IN_2\)</span> and y-axis a diode current <span class="math notranslate">\((IN_1 - IN_2) / R_1\)</span>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Copy code from below into cell 1</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import libraries</span>
<span class="kn">from</span> <span class="nn">redpitaya.overlay.mercury</span> <span class="kn">import</span> <span class="n">mercury</span> <span class="k">as</span> <span class="n">overlay</span>

<span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">push_notebook</span><span class="p">,</span> <span class="n">show</span><span class="p">,</span> <span class="n">output_notebook</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">HoverTool</span><span class="p">,</span> <span class="n">Range1d</span><span class="p">,</span> <span class="n">LinearAxis</span><span class="p">,</span> <span class="n">LabelSet</span><span class="p">,</span> <span class="n">Label</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span><span class="p">,</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.resources</span> <span class="kn">import</span> <span class="n">INLINE</span>
<span class="n">output_notebook</span><span class="p">(</span><span class="n">resources</span><span class="o">=</span><span class="n">INLINE</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="c1"># Initialize fpga modules</span>
<span class="n">fpga</span> <span class="o">=</span> <span class="n">overlay</span><span class="p">()</span>
<span class="n">gen0</span> <span class="o">=</span> <span class="n">fpga</span><span class="o">.</span><span class="n">gen</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">osc</span> <span class="o">=</span> <span class="p">[</span><span class="n">fpga</span><span class="o">.</span><span class="n">osc</span><span class="p">(</span><span class="n">ch</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span> <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">fpga</span><span class="o">.</span><span class="n">_MNO</span><span class="p">)]</span>

<span class="c1"># Configure OUT1 generator channel</span>
<span class="n">gen0</span><span class="o">.</span><span class="n">amplitude</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">gen0</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">gen0</span><span class="o">.</span><span class="n">waveform</span> <span class="o">=</span> <span class="n">gen0</span><span class="o">.</span><span class="n">sawtooth</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">gen0</span><span class="o">.</span><span class="n">frequency</span> <span class="o">=</span> <span class="mi">2000</span>
<span class="n">gen0</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">gen0</span><span class="o">.</span><span class="n">enable</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">gen0</span><span class="o">.</span><span class="n">trigger</span><span class="p">()</span>

<span class="c1"># R1 resistor value</span>
<span class="n">R1</span> <span class="o">=</span> <span class="mi">10</span>

<span class="c1"># Configure IN1 and IN2 oscilloscope input channels</span>
<span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">osc</span><span class="p">:</span>
<span class="n">ch</span><span class="o">.</span><span class="n">filter_bypass</span> <span class="o">=</span> <span class="bp">True</span>
<span class="c1"># data rate decimation</span>
<span class="n">ch</span><span class="o">.</span><span class="n">decimation</span> <span class="o">=</span> <span class="mi">10</span>
<span class="c1"># trigger timing [sample periods]</span>
<span class="n">N</span> <span class="o">=</span> <span class="n">ch</span><span class="o">.</span><span class="n">buffer_size</span>
<span class="n">ch</span><span class="o">.</span><span class="n">trigger_pre</span>  <span class="o">=</span> <span class="mi">0</span>
<span class="n">ch</span><span class="o">.</span><span class="n">trigger_post</span> <span class="o">=</span> <span class="n">N</span>
<span class="c1"># osc0 is controlling both channels</span>
<span class="n">ch</span><span class="o">.</span><span class="n">sync_src</span> <span class="o">=</span> <span class="n">fpga</span><span class="o">.</span><span class="n">sync_src</span><span class="p">[</span><span class="s2">&quot;osc0&quot;</span><span class="p">]</span>
<span class="n">ch</span><span class="o">.</span><span class="n">trig_src</span> <span class="o">=</span> <span class="n">fpga</span><span class="o">.</span><span class="n">trig_src</span><span class="p">[</span><span class="s2">&quot;osc0&quot;</span><span class="p">]</span>
<span class="c1"># trigger level [V], edge [&#39;neg&#39;, &#39;pos&#39;] and holdoff time [sample periods]</span>
<span class="n">ch</span><span class="o">.</span><span class="n">level</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">ch</span><span class="o">.</span><span class="n">edg</span> <span class="o">=</span> <span class="s1">&#39;pos&#39;</span>
<span class="n">ch</span><span class="o">.</span><span class="n">holdoff</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># Initialize diode current and voltage</span>
<span class="n">V</span> <span class="o">=</span> <span class="n">I</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>

<span class="c1"># Plotting</span>
<span class="n">hover</span> <span class="o">=</span> <span class="n">HoverTool</span><span class="p">(</span><span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;vline&#39;</span><span class="p">,</span> <span class="n">tooltips</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;V&quot;</span><span class="p">,</span> <span class="s2">&quot;@x&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="s2">&quot;@y&quot;</span><span class="p">)])</span>
<span class="n">tools</span> <span class="o">=</span> <span class="s2">&quot;wheel_zoom,box_zoom,reset,pan&quot;</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">plot_height</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">plot_width</span><span class="o">=</span><span class="mi">900</span><span class="p">,</span>
           <span class="n">title</span><span class="o">=</span><span class="s2">&quot;XY plot of diodes VI characteristic&quot;</span><span class="p">,</span>
           <span class="n">toolbar_location</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">,</span>
           <span class="n">tools</span><span class="o">=</span><span class="p">(</span><span class="n">tools</span><span class="p">,</span> <span class="n">hover</span><span class="p">))</span>
<span class="n">p</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="s1">&#39;Voltage [V]&#39;</span>
<span class="n">p</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="s1">&#39;Current [mA]&#39;</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">V</span><span class="p">,</span><span class="n">I</span><span class="p">,</span> <span class="n">line_width</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">line_alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">)</span>

<span class="c1"># get and explicit handle to update the next show cell</span>
<span class="n">target</span> <span class="o">=</span> <span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">notebook_handle</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Create new cell (Insert -&gt; Cell Below) and copy code from below into
it.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Measuring I, V and re-plotting</span>
<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
<span class="c1"># reset and start</span>
<span class="n">osc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="n">osc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="c1"># wait for data</span>
<span class="k">while</span> <span class="p">(</span><span class="n">osc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">status_run</span><span class="p">()):</span> <span class="k">pass</span>
<span class="n">V0</span> <span class="o">=</span> <span class="n">osc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="n">N</span><span class="o">-</span><span class="mi">100</span><span class="p">)</span>  <span class="c1"># IN1 signal</span>
<span class="n">V1</span> <span class="o">=</span> <span class="n">osc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="n">N</span><span class="o">-</span><span class="mi">100</span><span class="p">)</span>  <span class="c1"># IN2 signal</span>
<span class="n">I</span><span class="o">=</span><span class="p">((</span><span class="n">V0</span><span class="o">-</span><span class="n">V1</span><span class="p">)</span><span class="o">/</span><span class="n">R1</span><span class="p">)</span><span class="o">*</span><span class="mf">1E3</span>     <span class="c1"># 1E3 convert to mA</span>
<span class="n">r</span><span class="o">.</span><span class="n">data_source</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">V0</span>
<span class="n">r</span><span class="o">.</span><span class="n">data_source</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">I</span>
<span class="n">push_notebook</span><span class="p">(</span><span class="n">handle</span><span class="o">=</span><span class="n">target</span><span class="p">)</span>
</pre></div>
</div>
<p>Run Cell 1 and Cell 2. Notice cell 2 is a main loop for the
acquisition and re-plotting. If you stop the acquisition just run
only cell 2 for starting measurements again.</p>
<p>After running the code above you should get diode VI characteristic as
is shown on figure 8.</p>
<img alt="_images/Activity_19_Figure_8.png" src="_images/Activity_19_Figure_8.png" />
<p>Figure 8: Didoes VI characteristic measured using  Jupyter Notebook</p>
<p>From the figure 8 the typical diode VI characteristic is shown. From
the figure 8 we can see that, as the voltage on the diode is
increasing (from 0-0.5V) the diode current stays near zero until
voltage reaches values near threshold voltage (~0.6V). At this point
diode is “turned on” and the path current (diode current) is only
limited by resistor R1. In case when the diode voltage is decreasing
the VI curve is not the same, resulting in the diode hysteresis. Upper
curve from figure 8 shows that once the diode was “turned on” the
lower diode voltage will cause higher current than in the case when
the diode was previously “turned off”. An ideal diode would not have
hysteresis i.e the diode current would be independent of previous
diode states but only on the diode voltage.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Try to answer on what is causing diode hysteresis?</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Activity20_DiodeRectifiers.html" class="btn btn-neutral float-right" title="20. Diode Rectifiers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Activity18_TheComparatorSchmittTrigger.html" class="btn btn-neutral" title="18. The Comparator, Positive Feedback and Schmitt Trigger" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Red Pitaya d.d..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>