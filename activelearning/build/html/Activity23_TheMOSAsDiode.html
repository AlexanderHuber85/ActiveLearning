

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>23. The MOS transistor connected as a diode &mdash; Red Pitaya 1.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Red Pitaya 1.0 documentation" href="index.html"/>
        <link rel="next" title="24. BJT transistor as a switch" href="Activity24_TheBJTasSwitch.html"/>
        <link rel="prev" title="22. The BJT transistor connected as a diode" href="Activity22_TheBJTasDiode.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Red Pitaya
          

          
            
            <img src="_static/RedPitayaLogo.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Activity01_Phase.html">1. What is Phase?</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity02_Kirchhoff.html">2. Kirchhoff’s Voltage and Current Laws</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity03_Voltage.html">3. Voltage Division</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity04_Proportionality.html">4. Proportionality and Superposition</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity05_Thevenin.html">5. Thévenin Equivalent Circuit and Maximum Power Transfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity06_ResponseRC.html">6. Transient Response of RC Circuit</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity07_ResponseRL.html">7. Transient Response of an RL Circuit</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity08_ResonanceRCL.html">8. Resonance in RLC Circuits</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity09_LowPassandHighPassFilters.html">9. Low Pass and High Pass Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity10_BandPassFilters.html">10. Band Pass Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity11_ImpedanceMeasurementFrequencyEffects.html">11. Impedance Measurement - Frequency Effects</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity12_MeasuringaLoudspeakerImpedanceProfile.html">12. Measuring a Loudspeaker Impedance Profile</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity13_BasicOPAmpConfigurations.html">13. Basic OP Amp Configurations</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity14_OPAMPOpenLoopGain.html">14. OPAMP Open Loop Gain</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity15_OpAmpGainBandwidthProduct.html">15. OPAMP Gain Bandwidth Product <span class="math notranslate">\(GBW\)</span></a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity16_DifferenceAmplifier.html">16. Difference Amplifier</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity17_CurrentSensingUsingDifferenceAmplifier.html">17. Current Sensing using a Difference Amplifier</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity18_TheComparatorSchmittTrigger.html">18. The Comparator, Positive Feedback and Schmitt Trigger</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity19_Diodes.html">19. Diodes and Jupyter Notebook example</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity20_DiodeRectifiers.html">20. Diode Rectifiers</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity21_PrecisionRectifiers.html">21. Precision Rectifiers, Absolute value circuits</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity22_TheBJTasDiode.html">22. The BJT transistor connected as a diode</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">23. The MOS transistor connected as a diode</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#objective">23.1. Objective</a></li>
<li class="toctree-l2"><a class="reference internal" href="#notes">23.2. Notes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#materials">23.2.1. Materials</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nmos-as-a-diode">23.2.2. NMOS as a diode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#procedure">23.2.3. Procedure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vi-curve-measurements">23.2.4. VI curve measurements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pmos-as-a-diode">23.2.5. PMOS as a diode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">23.2.6. Procedure</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Activity24_TheBJTasSwitch.html">24. BJT transistor as a switch</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity25_MOSasSwitch.html">25. MOSFET transistor as a switch</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity26_BJTCommonEmitterAmplifier.html">26. BJT Common Emitter Amplifier</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity27_MOSCommonSourceAmplifier.html">27. MOS transistor common source amplifier</a></li>
<li class="toctree-l1"><a class="reference internal" href="Activity28_BoostConverter.html">28. DC-DC Boost Converter</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Red Pitaya</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>23. The MOS transistor connected as a diode</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/Activity23_TheMOSAsDiode.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-mos-transistor-connected-as-a-diode">
<h1>23. The MOS transistor connected as a diode<a class="headerlink" href="#the-mos-transistor-connected-as-a-diode" title="Permalink to this headline">¶</a></h1>
<div class="section" id="objective">
<h2>23.1. Objective<a class="headerlink" href="#objective" title="Permalink to this headline">¶</a></h2>
<p>The purpose of this experiments is to investigate the forward current vs. voltage characteristics of a MOS field effect transistor (NMOS and PMOS) connected as a diode. Before doing this experiment overview of previous experiment is <a class="reference external" href="http://red-pitaya-active-learning.readthedocs.io/en/latest/Activity22_TheBJTasDiode.html">recommended</a>.</p>
</div>
<div class="section" id="notes">
<h2>23.2. Notes<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h2>
<p>In this tutorials we use the terminology taken from the user manual when referring to the connections to the Red Pitaya STEMlab board <a class="reference external" href="http://redpitaya.readthedocs.io/en/latest/doc/developerGuide/125-10/top.html">hardware</a>.
<a class="reference external" href="http://redpitaya.readthedocs.io/en/latest/doc/appsFeatures/apps-featured/oscSigGen/osc.html">Oscilloscope</a> &amp; <a class="reference external" href="http://redpitaya.readthedocs.io/en/latest/doc/appsFeatures/apps-featured/oscSigGen/osc.html">Signal</a> <a class="reference external" href="http://redpitaya.readthedocs.io/en/latest/doc/appsFeatures/apps-featured/oscSigGen/osc.html">generator</a> application is used for generating and observing signals on the circuit.
Extension connector pins used for <strong>+5V</strong> , <strong>-3.3V</strong> and <strong>+3.3V</strong> voltage supply are show in the documentation <a class="reference external" href="http://redpitaya.readthedocs.io/en/latest/doc/developerGuide/125-14/extent.html#extension-connector-e2">here</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Red Pitaya STEMlab outputs can generate voltage signals with maximal output range of +/- 1V (2Vpp). For this experiment the higher signal amplitudes are required. Because of that we will use an <a class="reference external" href="http://www.analog.com/media/en/technical-documentation/data-sheets/OP184_284_484.pdf">OP484</a> in the <a class="reference external" href="http://red-pitaya-active-learning.readthedocs.io/en/latest/Activity13_BasicOPAmpConfigurations.html#inverting-amplifier">inverting</a> opamp configuration to enable OUT1/OUT2 signal amplification achieving voltage swing between +4.7V  to -3.2V. An OP484 will be supplied from STEMlab +5V and -3.3V voltage rails. Gain of the inverting amplifier will be set to ~5, where <span class="math notranslate">\(R_i  = 2.2k \Omega\)</span> and <span class="math notranslate">\(R_f  = 10k \Omega\)</span>
Try to answer why we have used an OP484 instead for example OP27 or OP97. (hint “rail-to-rail”).</p>
</div>
<div class="section" id="materials">
<h3>23.2.1. Materials<a class="headerlink" href="#materials" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Red Pitaya STEMlab</li>
<li>1x <a class="reference external" href="http://www.analog.com/media/en/technical-documentation/data-sheets/OP184_284_484.pdf">OP484</a> quad rail-rail op-amp</li>
<li>1x 1kΩ Resistor</li>
<li>1x small signal NMOS transistor (<a class="reference external" href="http://www.redrok.com/MOSFET_ZVN2110A_100V_320mA_4O_Vth2.4_TO-92_ELine.pdf">ZVN211</a>)</li>
<li>1x small signal PMOS transistor (<a class="reference external" href="https://www.diodes.com/assets/Datasheets/ZVP2110A.pdf">ZVP211</a>)</li>
<li>1x Solder-less Breadboard</li>
</ul>
</div>
<div class="section" id="nmos-as-a-diode">
<h3>23.2.2. NMOS as a diode<a class="headerlink" href="#nmos-as-a-diode" title="Permalink to this headline">¶</a></h3>
<p>Connection of the NMOS in diode configuration is shown figure 2. NMOS operate different than the NPN BJT transistor in a diode configuration.
Forward drop down voltage will not be typical 0.7V but it is dependent on transistor size, specification etc. For selected NMOS transistor the
so called threshold voltage <span class="math notranslate">\(V_{TH}\)</span> is around 2.4V.This mean when the Gate (G) voltage exceed <span class="math notranslate">\(V_{TH}\)</span> the transistor will be turned ON and start conducting. Of course since Drain (D) pin is connected to the Gate pin of the transistor the potential of the <span class="math notranslate">\(D-G\)</span> will stay at the level of the threshold voltage <span class="math notranslate">\(V_{TH}\)</span>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This configuration of NMOS will effectively produce a diode with forward drop voltage equal to the <span class="math notranslate">\(V_{TH}\)</span></p>
</div>
<img alt="_images/Activity_23_Figure_1.png" src="_images/Activity_23_Figure_1.png" />
<p>Figure 1:  <a class="reference external" href="http://www.redrok.com/MOSFET_ZVN2110A_100V_320mA_4O_Vth2.4_TO-92_ELine.pdf">ZVN211</a> specifications</p>
<p>On the breadboard build the circuit from figure 2 and proceed withe the measurements.</p>
<img alt="_images/Activity_23_Figure_2.png" src="_images/Activity_23_Figure_2.png" />
<p>Figure 2:  NMOS diode connection diagram</p>
</div>
<div class="section" id="procedure">
<h3>23.2.3. Procedure<a class="headerlink" href="#procedure" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Build the circuit from figure 1 on the breadboard. Set R1=2.2kΩ, R2=10kΩ and R3=1kΩ. For M1 take ZVN211.</li>
</ol>
<img alt="_images/Activity_22_Figure_3.png" src="_images/Activity_22_Figure_3.png" />
<p>Figure 3:   NMOS diode connection on the breadboard</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Before connecting the circuit to the STEMlab -3.3V and +3.3V  pins double check your circuit. The  -3.3V and +3.3V  voltage supply pins do not have short circuit handling and they can be damaged in case of short circuit.</p>
</div>
<ol class="arabic simple" start="2">
<li>Start the Oscilloscope &amp; Signal generator application</li>
<li>In the OUT1 settings menu set Amplitude value to 0.45V, DC offset to -0.45 V, Frequency to 1kHz to apply the input voltage.
From the waveform menu select TRIANGLE, deselect SHOW and select enable.</li>
<li>On the left bottom of the screen be sure that  IN1, IN2 and MATH V/div are set to 1V/div (You can set V/div by selecting the desired
channel and using vertical +/- controls)</li>
<li>Set t/div value to 200us/div (You can set t/div using horizontal +/- controls)</li>
<li>Under MATH channel settings set <span class="math notranslate">\(IN1-IN2\)</span> and select ENABLE.</li>
<li>Under IN1 and IN2 menu settings set probe to x10 and vertical offset to 0.</li>
<li>Under MATH menu settings set vertical offset to 0.</li>
<li>Under TRIGER settings, set trigger level to 1V</li>
</ol>
<img alt="_images/Activity_23_Figure_4.png" src="_images/Activity_23_Figure_4.png" />
<p>Figure 4: NMOS diode connection measurements</p>
</div>
<div class="section" id="vi-curve-measurements">
<h3>23.2.4. VI curve measurements<a class="headerlink" href="#vi-curve-measurements" title="Permalink to this headline">¶</a></h3>
<p>Since NMOS can behave as an diode with forward voltage equal to the <span class="math notranslate">\(V_{TH}\)</span> (configuration shown on figure 2) we can measure its VI characteristic as we did when performing diode measurements.For this task we will use Jupyter Notebook Web application. How to start Jupyter Notebook and create new project is shown on figure 5 flow chart.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <a class="reference external" href="http://jupyter.org/index.html">Jupyter</a> <a class="reference external" href="http://jupyter.org/index.html">Notebook</a> is a web application that allows you to create and share documents that contain live code, equations, visualizations and explanatory text. They have also ensured support for the Jupyter application with Red Pitaya libraries enabling control of all features of the STEMlab boards such as: signal acquisition, signal generation, digital signal control, communication etc. The Jupyter Notebook is started on the same way as any other applications. After starting Jupyter application a web based notebook is opened.  This combination of the notebook, STEMlab and Python features makes the STEMlab an excellent tool for prototyping and quick programing. Since Jupyter Notebook enables text, equation and picture editing this is a perfect tool for tutorials, examples and ect.</p>
</div>
<img alt="_images/Activity_19_Figure_7.png" src="_images/Activity_19_Figure_7.png" />
<p>Figure 5: Creating new Jupyter notebook</p>
<p>If you have successfully created new Jupyter notebook then copy-paste code bellow and run it.
Code bellow will generate same signal as from figure 4 but it will plot them in XY graph.
For measuring <span class="math notranslate">\(VI\)</span> curve an “XY” plot is required where x-axis will represent diode voltage
<span class="math notranslate">\(IN_2\)</span> and y-axis a diode current <span class="math notranslate">\((IN_1 - IN_2) / R_3\)</span>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Copy code from below into cell 1</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import libraries</span>
<span class="kn">from</span> <span class="nn">redpitaya.overlay.mercury</span> <span class="kn">import</span> <span class="n">mercury</span> <span class="k">as</span> <span class="n">overlay</span>

<span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">push_notebook</span><span class="p">,</span> <span class="n">show</span><span class="p">,</span> <span class="n">output_notebook</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">HoverTool</span><span class="p">,</span> <span class="n">Range1d</span><span class="p">,</span> <span class="n">LinearAxis</span><span class="p">,</span> <span class="n">LabelSet</span><span class="p">,</span> <span class="n">Label</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span><span class="p">,</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.resources</span> <span class="kn">import</span> <span class="n">INLINE</span>
<span class="n">output_notebook</span><span class="p">(</span><span class="n">resources</span><span class="o">=</span><span class="n">INLINE</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="c1"># Initialize fpga modules</span>
<span class="n">fpga</span> <span class="o">=</span> <span class="n">overlay</span><span class="p">()</span>
<span class="n">gen0</span> <span class="o">=</span> <span class="n">fpga</span><span class="o">.</span><span class="n">gen</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">osc</span> <span class="o">=</span> <span class="p">[</span><span class="n">fpga</span><span class="o">.</span><span class="n">osc</span><span class="p">(</span><span class="n">ch</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span> <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">fpga</span><span class="o">.</span><span class="n">MNO</span><span class="p">)]</span>

<span class="c1"># Configure OUT1 generator channel</span>
<span class="n">gen0</span><span class="o">.</span><span class="n">amplitude</span> <span class="o">=</span> <span class="mf">0.45</span>
<span class="n">gen0</span><span class="o">.</span><span class="n">offset</span>    <span class="o">=</span> <span class="o">-</span><span class="mf">0.45</span>
<span class="n">gen0</span><span class="o">.</span><span class="n">waveform</span>  <span class="o">=</span> <span class="n">gen0</span><span class="o">.</span><span class="n">sawtooth</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">gen0</span><span class="o">.</span><span class="n">frequency</span> <span class="o">=</span> <span class="mi">2000</span>
<span class="n">gen0</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">gen0</span><span class="o">.</span><span class="n">enable</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">gen0</span><span class="o">.</span><span class="n">trigger</span><span class="p">()</span>

<span class="c1"># R1 resistor value</span>
<span class="n">R3</span><span class="o">=</span><span class="mi">1000</span>

<span class="c1"># Configure IN1 and IN2 oscilloscope input channels</span>
<span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">osc</span><span class="p">:</span>
    <span class="n">ch</span><span class="o">.</span><span class="n">filter_bypass</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="c1"># data rate decimation</span>
    <span class="n">ch</span><span class="o">.</span><span class="n">decimation</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="c1"># trigger timing [sample periods]</span>
    <span class="n">N</span> <span class="o">=</span> <span class="n">ch</span><span class="o">.</span><span class="n">buffer_size</span>
    <span class="n">ch</span><span class="o">.</span><span class="n">trigger_pre</span>  <span class="o">=</span> <span class="mi">0</span>
    <span class="n">ch</span><span class="o">.</span><span class="n">trigger_post</span> <span class="o">=</span> <span class="n">N</span>
    <span class="c1"># osc0 is controlling both channels</span>
    <span class="n">ch</span><span class="o">.</span><span class="n">sync_src</span> <span class="o">=</span> <span class="n">fpga</span><span class="o">.</span><span class="n">sync_src</span><span class="p">[</span><span class="s2">&quot;osc0&quot;</span><span class="p">]</span>
    <span class="n">ch</span><span class="o">.</span><span class="n">trig_src</span> <span class="o">=</span> <span class="n">fpga</span><span class="o">.</span><span class="n">trig_src</span><span class="p">[</span><span class="s2">&quot;osc0&quot;</span><span class="p">]</span>
    <span class="c1"># trigger level [V], edge [&#39;neg&#39;, &#39;pos&#39;] and holdoff time [sample periods]</span>
    <span class="n">ch</span><span class="o">.</span><span class="n">level</span>   <span class="o">=</span> <span class="mf">0.01</span>
    <span class="n">ch</span><span class="o">.</span><span class="n">edg</span>     <span class="o">=</span> <span class="s1">&#39;pos&#39;</span>
    <span class="n">ch</span><span class="o">.</span><span class="n">holdoff</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># Initialize diode current and voltage</span>
<span class="n">V</span> <span class="o">=</span> <span class="n">I</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>

<span class="c1"># Plotting</span>
<span class="n">hover</span> <span class="o">=</span> <span class="n">HoverTool</span><span class="p">(</span><span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;vline&#39;</span><span class="p">,</span> <span class="n">tooltips</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;V&quot;</span><span class="p">,</span> <span class="s2">&quot;@x&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="s2">&quot;@y&quot;</span><span class="p">)])</span>
<span class="n">tools</span> <span class="o">=</span> <span class="s2">&quot;wheel_zoom,box_zoom,reset,pan&quot;</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">plot_height</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">plot_width</span><span class="o">=</span><span class="mi">900</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;XY plot of NMOS transistor VI characteristic&quot;</span><span class="p">,</span> <span class="n">toolbar_location</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="p">(</span><span class="n">tools</span><span class="p">,</span> <span class="n">hover</span><span class="p">))</span>
<span class="n">p</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">axis_label</span><span class="o">=</span><span class="s1">&#39;Voltage [V]&#39;</span>
<span class="n">p</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">axis_label</span><span class="o">=</span><span class="s1">&#39;Current [mA]&#39;</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">V</span><span class="p">,</span><span class="n">I</span><span class="p">,</span> <span class="n">line_width</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">line_alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">)</span>
<span class="c1"># get and explicit handle to update the next show cell</span>
<span class="n">target</span> <span class="o">=</span> <span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">notebook_handle</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>Create new cell (Insert -&gt; Cell Below) and copy code from below into it.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Measuring I , V  and re-plotting</span>
<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="c1"># reset and start</span>
    <span class="n">osc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
    <span class="n">osc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="c1"># wait for data</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">osc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">status_run</span><span class="p">()):</span> <span class="k">pass</span>
    <span class="n">V0</span><span class="o">=</span><span class="n">osc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="n">N</span><span class="o">-</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="mi">10</span>  <span class="c1"># IN1 signal</span>
    <span class="n">V1</span><span class="o">=</span><span class="n">osc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="n">N</span><span class="o">-</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="mi">10</span>  <span class="c1"># IN2 signal</span>
    <span class="n">I</span><span class="o">=</span><span class="p">((</span><span class="n">V0</span><span class="o">-</span><span class="n">V1</span><span class="p">)</span><span class="o">/</span><span class="n">R3</span><span class="p">)</span><span class="o">*</span><span class="mf">1E3</span>        <span class="c1"># 1E3 convert to mA</span>
    <span class="n">r</span><span class="o">.</span><span class="n">data_source</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">V0</span>
    <span class="n">r</span><span class="o">.</span><span class="n">data_source</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">I</span>
    <span class="n">push_notebook</span><span class="p">(</span><span class="n">handle</span><span class="o">=</span><span class="n">target</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p class="last">Run Cell 1 and Cell 2. Notice cell 2 is a main loop for the acquisition and re-plotting. If you stop the acquisition just run only cell 2
for starting measurements again.</p>
</div>
<p>After running the code above you should get diode VI characteristic as is shown on figure 5.</p>
<img alt="_images/Activity_23_Figure_5.png" src="_images/Activity_23_Figure_5.png" />
<p>Figure 6: NMOS VI characteristic measured using Jupyter Notebook</p>
</div>
<div class="section" id="pmos-as-a-diode">
<h3>23.2.5. PMOS as a diode<a class="headerlink" href="#pmos-as-a-diode" title="Permalink to this headline">¶</a></h3>
<p>Same measurements can be also don for PMOS transistor. With PMOS transistor the voltage polarity is reversed so PMOS diode configuration must be different than
NMOS one. PMOS diode configuration is shown on figure 7.</p>
<img alt="_images/Activity_23_Figure_6.png" src="_images/Activity_23_Figure_6.png" />
<p>Figure 7:  PMOS diode connection diagram</p>
</div>
<div class="section" id="id1">
<h3>23.2.6. Procedure<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Build the circuit from figure 7 on the breadboard. Set R1=2.2kΩ, R2=10kΩ and R3=1kΩ. For M1 take ZVP211.</li>
</ol>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Before connecting the circuit to the STEMlab -3.3V and +3.3V  pins double check your circuit. The  -3.3V and +3.3V  voltage supply pins do not have short circuit handling and they can be damaged in case of short circuit.</p>
</div>
<ol class="arabic simple" start="2">
<li>Start the Oscilloscope &amp; Signal generator application</li>
<li>In the OUT1 settings menu set Amplitude value to 0.45V, DC offset to -0.45 V, Frequency to 1kHz to apply the input voltage.
From the waveform menu select TRIANGLE, deselect SHOW and select enable.</li>
<li>On the left bottom of the screen be sure that  IN1, IN2 and MATH V/div are set to 1V/div (You can set V/div by selecting the desired
channel and using vertical +/- controls)</li>
<li>Set t/div value to 200us/div (You can set t/div using horizontal +/- controls)</li>
<li>Under MATH channel settings set <span class="math notranslate">\(IN1-IN2\)</span> and select ENABLE.</li>
<li>Under IN1 and IN2 menu settings set probe to x10 and vertical offset to 0.</li>
<li>Under MATH menu settings set vertical offset to 0.</li>
<li>Under TRIGER settings, set trigger level to 1V</li>
</ol>
<img alt="_images/Activity_23_Figure_7.png" src="_images/Activity_23_Figure_7.png" />
<p>Figure 8: PMOS diode connection measurements</p>
<p>As we can see from figure 8 the PMOS in diode configuration behaves as an diode with forward drop voltage equal to the PMOS <span class="math notranslate">\(V_{TH}\)</span>.
Compare Figure 8 and Figure 4 and try to explain the difference between NMOS and PMOS diode configurations.</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Activity24_TheBJTasSwitch.html" class="btn btn-neutral float-right" title="24. BJT transistor as a switch" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Activity22_TheBJTasDiode.html" class="btn btn-neutral" title="22. The BJT transistor connected as a diode" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Red Pitaya d.d..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>